#!/bin/bash -x
whereis 7zr
7zr x precompiled_headers.7z 1>/dev/null 2>/dev/null
if [ $? != 0 ]
then
	exit 1
fi
mkdir /downloads/ 2>/dev/null
mkdir /downloads/qt /downloads/boost /downloads/python /downloads/assimp /downloads/gcc-libs

ln -s /downloads/qt $(pwd)/qt
ln -s /downloads/boost $(pwd)/boost
ln -s /downloads/python $(pwd)/python
ln -s /downloads/assimp $(pwd)/assimp
ln -s /downloads/gcc-libs $(pwd)/gcc-libs
ls -lah



mv mingw-w64-x86_64-qt5-5.10.0-1-any.pkg.tar.xz qt/
if [ $? != 0 ]
then
	exit 1
fi
mv mingw-w64-x86_64-python3-3.6.4-1-any.pkg.tar.xz python/
if [ $? != 0 ]
then
	exit 1
fi
mv mingw-w64-x86_64-boost-1.66.0-1-any.pkg.tar.xz boost/
if [ $? != 0 ]
then
	exit 1
fi
mv mingw-w64-x86_64-assimp-4.0.1-1-any.pkg.tar.xz assimp/
if [ $? != 0 ]
then
	exit 1
fi
mv mingw-w64-x86_64-gcc-libs-7.2.0-1-any.pkg.tar.xz gcc-libs/




cd qt
ls mingw64
if [ $? != 0 ]
then
    ls -lah mingw-w64-x86_64-qt5-5.10.0-1-any.pkg.tar.xz
    tar xf mingw-w64-x86_64-qt5-5.10.0-1-any.pkg.tar.xz 1>/dev/null 2>/dev/null
    if [ $? != 0 ]
    then
        exit 1
    fi
fi

cd ../python
ls mingw64
if [ $? != 0 ]
then
    ls -lah mingw-w64-x86_64-python3-3.6.4-1-any.pkg.tar.xz
    tar xf mingw-w64-x86_64-python3-3.6.4-1-any.pkg.tar.xz 1>/dev/null 2>/dev/null
    if [ $? != 0 ]
    then
        exit 1
    fi
fi

cd ../boost
ls mingw64
if [ $? != 0 ]
then
    ls -lah mingw-w64-x86_64-boost-1.66.0-1-any.pkg.tar.xz
    tar xf mingw-w64-x86_64-boost-1.66.0-1-any.pkg.tar.xz 1>/dev/null 2>/dev/null
    if [ $? != 0 ]
    then
        exit 1
    fi
fi

cd ../assimp
ls mingw64
if [ $? != 0 ]
then
    ls -lah mingw-w64-x86_64-assimp-4.0.1-1-any.pkg.tar.xz
    tar xf mingw-w64-x86_64-assimp-4.0.1-1-any.pkg.tar.xz 1>/dev/null 2>/dev/null
    if [ $? != 0 ]
    then
        exit 1
    fi
fi

cd ../gcc-libs
ls mingw64
if [ $? != 0 ]
then
    ls -lah mingw-w64-x86_64-gcc-libs-7.2.0-1-any.pkg.tar.xz
    tar xf mingw-w64-x86_64-gcc-libs-7.2.0-1-any.pkg.tar.xz 1>/dev/null 2>/dev/null
    if [ $? != 0 ]
    then
        exit 1
    fi
fi
exit 0